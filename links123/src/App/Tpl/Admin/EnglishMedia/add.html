<tagLib name="html" />
<include file="Public:header" />
<load href="__PUBLIC__/skin/js/jquery-1.8.0.min.js" />

<div id="main" class="main" >
    <div class="content">
        <div class="title">添加英语角媒体[ <a href="javascript:window.close();">返回列表</a> ]</div>
        <form method='post' id="form1" action="__URL__/insert/" >
            <table cellpadding=3 cellspacing=3>
                <tr>
                    <td class="tRight" >媒体名称：</td>
                    <td class="tLeft" ><input type="text" class="bLeftRequire large" name="name" value='' /></td>
                </tr>
                <!--
                <tr>
                    <td class="tRight" ></td>
                    <td class="tLeft" >
                        <label><input type="radio" name="pattern" value="1" checked="checked"/>视频</label>&nbsp;
                        <label><input type="radio" name="pattern" value="2" />音频</label>&nbsp;&nbsp;
                        <label><input type="radio" name="voice" value="1"  checked="checked"/>美音</label>&nbsp;
                        <label><input type="radio" name="voice" value="2" />英音</label>&nbsp;&nbsp;
                    </td>
                </tr>
                <tr>
                    <td class="tRight" >学科：</td>
                    <td class="tLeft object_td" >
                        <input type="hidden" value="" name="object" />
                <volist name="object_list" id="object">
                    <neq name="object['name']" value="综合">
                    <label id="object_{$object.id}" class="radio_label object_lable">
                        {$object.name}
                    </label>
                    </neq>
                </volist>
                </td>
                </tr>
                <tr>
                    <td class="tRight" >等级：</td>
                    <td class="tLeft level_td" >
                        <input type="hidden" value="" name="level" />
                <volist name="level_list" id="level">
                    <label id="level_{$level.id}" class="radio_label level_label">
                        {$level.name}
                    </label>
                </volist>
                </td>
                </tr>
                <tr>
                    <td class="tRight" >专题：</td>
                    <td class="tLeft subject_td" >
                        <input type="hidden" value="" name="subject" />
                <volist name="subject_list" id="subject">
                    <label id="subject_{$subject.id}" class="radio_label subject_label">
                        {$subject.name}
                    </label>
                </volist>
                </td>
                </tr>
                -->
                <tr>
                    <td class="tRight" >媒体播放类型：</td>
                    <td class="tLeft" >
                        <label><input type="radio" name="play_type" value="0"  checked="checked"/>正常URL播放</label>&nbsp;&nbsp;
                        <label><input type="radio" name="play_type" value="1" />Object内嵌播放</label>&nbsp;&nbsp;
                        <label><input type="radio" name="play_type" value="2" />iframe内嵌播放</label>&nbsp;&nbsp;
                        <label><input type="radio" name="play_type" value="3" />swfobject插件播放</label>&nbsp;&nbsp;
                        <label><input type="radio" name="play_type" value="4" />本地视频播放</label>&nbsp;&nbsp;
                        <label><input type="radio" name="play_type" value="5" />弹出框引用播放</label>
                </tr>
                <tr>
                    <td class="tRight" >媒体优先播放：</td>
                    <td class="tLeft" >
                        <label><input type="radio" name="priority_type" value="1"  checked="checked"/>外链</label>&nbsp;
                        <label><input type="radio" name="priority_type" value="2" />本地</label>&nbsp;&nbsp;
<!--                        推荐视频：
                        <label><input type="radio" name="recommend" value="1" />是</label>&nbsp;
                        <label><input type="radio" name="recommend" value="0"  checked="checked"/>否</label>&nbsp;&nbsp;-->
                        特别推荐：
                        <label><input type="radio" name="special_recommend" value="1" />是</label>&nbsp;
                        <label><input type="radio" name="special_recommend" value="0"  checked="checked"/>否</label>&nbsp;&nbsp;
<!--                        TED：
                        <label><input type="radio" name="ted" value="1" />是</label>&nbsp;
                        <label><input type="radio" name="ted" value="0"  checked="checked"/>否</label>-->
                    </td>
                </tr>
                <tr>
                    <td class="tRight" >媒体来源地址：</td>
                    <td class="tLeft" ><input type="text" class="bLeftRequire large" name="media_source_url" value='' /></td>
                </tr>
                <tr>
                    <td class="tRight" >媒体本地地址：</td>
                    <td class="tLeft" ><lable>{:C("VIDEO_UPLOAD_PATH")}</lable><input type="text" class="xhuge" name="local_path" value='' /></td>
                </tr>
                <tr>
                    <td class="tRight" >媒体缩略图地址：</td>
                    <td class="tLeft">
                        <textarea style="height: 40px;width: 600px;" name="media_thumb_img"></textarea>
                        <!--<input name="img" type="file" />-->
                    </td>
                </tr>
                <tr>
                    <td class="tRight" >媒体播放地址：</td>
                    <td class="tLeft" ><textarea name="play_code" style="height: 161px; width: 646px;"></textarea></td>
                </tr>
                <tr>
                    <td class="tRight" >字幕：</td>
                    <td class="tLeft" >
                        <textarea name="caption" style="height: 470px;width: 646px;"></textarea>
                    </td>
                </tr>
                <tr>
                    <td class="tRight" >状态：</td>
                    <td class="tLeft" >
                        <select name="status">
                            <option value="1">启用</option>
                            <option value="0">禁用</option>
                            <option value="-1">已删除</option>
                        </select>	
                    </td>
                </tr>
                <tr id="forbid_tr" <if condition="$vo['status'] eq 0"><else />style="display:none"</if> >
                    <td class="tRight" >原因：</td>
                    <td class="tLeft" >
                        <select name="forbid_reason" id="forbid_reason">
                            <option value="0">请选择</option>
                            <volist name="forbid_reason_options" id="forbid_reason_option">
                                <option value="{$forbid_reason_option.key}" <eq name="vo['forbid_reason']" value="$forbid_reason_option['key']">selected="true"</eq>>{$forbid_reason_option.name}</option>
                            </volist>
                        </select>
                    </td>
                </tr>
                <tr id="del_tr" <if condition="$vo['status'] eq -1"><else />style="display:none"</if>>
                    <td class="tRight" >原因：</td>
                    <td class="tLeft" >
                        <select name="del_reason" id="del_reason">
                            <option value="0">请选择</option>
                            <volist name="del_reason_options" id="del_reason_option">
                                <option value="{$del_reason_option.key}" <eq name="vo['del_reason']" value="$del_reason_option['key']">selected="true"</eq>>{$del_reason_option.name}</option>
                            </volist>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td class="center">
                        <input type="hidden" value="0" name="return_close" id="return_close"/>
                        <input type="submit" value="保 存" class="small submit">&nbsp;
                        <input type="submit" value="保存关闭" onclick="save_close()" class="small submit">&nbsp;
                        <input type="reset" class="submit small" value="清 空" >
                    </td>
                </tr>
            </table>
        </form>
    </div>
</div>

<script type="text/javascript">
    function save_close(){
        $("#return_close").val("1");
    }
    $(function() {
        $("[name='status']").change(function() {
            var v = parseInt(this.value);
            if(v == 1 ){
                //启用
                $("#del_tr").hide();
                $("#forbid_tr").hide();
                //$("#forbid_reason").val('0');
                //$("#del_reason").val('0')
            }else if( v == -1){
                //删除
                $("#del_tr").show();
                $("#forbid_tr").hide();
                //$("#forbid_reason").val('0');
            }else{
                //禁用
                //$("#del_reason").val('0')
                $("#del_tr").hide();
                $("#forbid_tr").show();
            }
        })
        $(".object_td").children("label").click(function() {
            $(this).css("color", "#FF0000").siblings("label").css("color", "#000000");
            var value = $(this).attr("id").substr($(this).attr("id").indexOf("_") + 1);
            $("input[name='object']").val(value);
        })
        $(".level_td").children("label").click(function() {
            $(this).css("color", "#FF0000").siblings("label").css("color", "#000000");
            var value = $(this).attr("id").substr($(this).attr("id").indexOf("_") + 1);
            $("input[name='level']").val(value);
        })
        $(".subject_td").children("label").click(function() {
            var value = $(this).attr("id").substr($(this).attr("id").indexOf("_") + 1);
            if ($(this).css("color") == "rgb(255, 0, 0)") {
                value = 0;
                $(this).css("color", "#000000")
            } else {
                $(this).css("color", "#FF0000").siblings("label").css("color", "#000000");
            }
            $("input[name='subject']").val(value);
        })


        $("input[name='recommend']").click(function() {
            if ($(this).val() == 0) {
                $("input[name='special_recommend'][value='0']").attr("checked","checked");
            }
        })
        $("input[name='special_recommend']").click(function() {
            if ($(this).val() == 1) {
                $("input[name='recommend'][value='1']").attr("checked","checked");
            }
        })
    })
</script>
